var dateTimeCalculations = function () {

    var _timeZoneCookie = "_timeZoneCookie";

    function getLocaleDateString() {

        var formats = {
            "ar-sa": "dd/mm/yy",
            "bg-bg": "dd.m.yyyy",
            "ca-es": "dd/mm/yyyy",
            "zh-tw": "yyyy/m/d",
            "cs-cz": "d.m.yyyy",
            "da-dk": "dd-mm-yyyy",
            "de-de": "dd.mm.yyyy",
            "el-gr": "d/m/yyyy",
            "en-us": "m/d/yyyy",
            "fi-fi": "d.m.yyyy",
            "fr-fr": "dd/mm/yyyy",
            "he-il": "dd/mm/yyyy",
            "hu-hu": "yyyy. mm. dd.",
            "is-is": "d.m.yyyy",
            "it-it": "dd/mm/yyyy",
            "ja-jp": "yyyy/mm/dd",
            "ko-kr": "yyyy-mm-dd",
            "nl-nl": "d-m-yyyy",
            "nb-no": "dd.mm.yyyy",
            "pl-pl": "yyyy-mm-dd",
            "pt-br": "d/m/yyyy",
            "ro-ro": "dd.mm.yyyy",
            "ru-ru": "dd.mm.yyyy",
            "hr-hr": "d.m.yyyy",
            "sk-sk": "d. m. yyyy",
            "sq-al": "yyyy-mm-dd",
            "sv-se": "yyyy-mm-dd",
            "th-th": "d/m/yyyy",
            "tr-tr": "dd.mm.yyyy",
            "ur-pk": "dd/mm/yyyy",
            "id-id": "dd/mm/yyyy",
            "uk-ua": "dd.mm.yyyy",
            "be-by": "dd.mm.yyyy",
            "sl-si": "d.m.yyyy",
            "et-ee": "d.mm.yyyy",
            "lv-lv": "yyyy.mm.dd.",
            "lt-lt": "yyyy.mm.dd",
            "fa-ir": "mm/dd/yyyy",
            "vi-vn": "dd/mm/yyyy",
            "hy-am": "dd.mm.yyyy",
            "az-latn-az": "dd.mm.yyyy",
            "eu-es": "yyyy/mm/dd",
            "mk-mk": "dd.mm.yyyy",
            "af-za": "yyyy/mm/dd",
            "ka-ge": "dd.mm.yyyy",
            "fo-fo": "dd-mm-yyyy",
            "hi-in": "dd-mm-yyyy",
            "ms-my": "dd/mm/yyyy",
            "kk-kz": "dd.mm.yyyy",
            "ky-kg": "dd.mm.yy",
            "sw-ke": "m/d/yyyy",
            "uz-latn-uz": "dd/mm yyyy",
            "tt-ru": "dd.mm.yyyy",
            "pa-in": "dd-mm-yy",
            "gu-in": "dd-mm-yy",
            "ta-in": "dd-mm-yyyy",
            "te-in": "dd-mm-yy",
            "kn-in": "dd-mm-yy",
            "mr-in": "dd-mm-yyyy",
            "sa-in": "dd-mm-yyyy",
            "mn-mn": "yy.mm.dd",
            "gl-es": "dd/mm/yy",
            "kok-in": "dd-mm-yyyy",
            "syr-sy": "dd/mm/yyyy",
            "dv-mv": "dd/mm/yy",
            "ar-iq": "dd/mm/yyyy",
            "zh-cn": "yyyy/m/d",
            "de-ch": "dd.mm.yyyy",
            "en-gb": "dd/mm/yyyy",
            "es-mx": "dd/mm/yyyy",
            "fr-be": "d/mm/yyyy",
            "it-ch": "dd.mm.yyyy",
            "nl-be": "d/mm/yyyy",
            "nn-no": "dd.mm.yyyy",
            "pt-pt": "dd-mm-yyyy",
            "sr-latn-cs": "d.m.yyyy",
            "sv-fi": "d.m.yyyy",
            "az-cyrl-az": "dd.mm.yyyy",
            "ms-bn": "dd/mm/yyyy",
            "uz-cyrl-uz": "dd.mm.yyyy",
            "ar-eg": "dd/mm/yyyy",
            "zh-hk": "d/m/yyyy",
            "de-at": "dd.mm.yyyy",
            "en-au": "d/mm/yyyy",
            "es-es": "dd/mm/yyyy",
            "fr-ca": "yyyy-mm-dd",
            "sr-cyrl-cs": "d.m.yyyy",
            "ar-ly": "dd/mm/yyyy",
            "zh-sg": "d/m/yyyy",
            "de-lu": "dd.mm.yyyy",
            "en-ca": "dd/mm/yyyy",
            "es-gt": "dd/mm/yyyy",
            "fr-ch": "dd.mm.yyyy",
            "ar-dz": "dd-mm-yyyy",
            "zh-mo": "d/m/yyyy",
            "de-li": "dd.mm.yyyy",
            "en-nz": "d/mm/yyyy",
            "es-cr": "dd/mm/yyyy",
            "fr-lu": "dd/mm/yyyy",
            "ar-ma": "dd-mm-yyyy",
            "en-ie": "dd/mm/yyyy",
            "es-pa": "mm/dd/yyyy",
            "fr-mc": "dd/mm/yyyy",
            "ar-tn": "dd-mm-yyyy",
            "en-za": "yyyy/mm/dd",
            "es-do": "dd/mm/yyyy",
            "ar-om": "dd/mm/yyyy",
            "en-jm": "dd/mm/yyyy",
            "es-ve": "dd/mm/yyyy",
            "ar-ye": "dd/mm/yyyy",
            "en-029": "mm/dd/yyyy",
            "es-co": "dd/mm/yyyy",
            "ar-sy": "dd/mm/yyyy",
            "en-bz": "dd/mm/yyyy",
            "es-pe": "dd/mm/yyyy",
            "ar-jo": "dd/mm/yyyy",
            "en-tt": "dd/mm/yyyy",
            "es-ar": "dd/mm/yyyy",
            "ar-lb": "dd/mm/yyyy",
            "en-zw": "m/d/yyyy",
            "es-ec": "dd/mm/yyyy",
            "ar-kw": "dd/mm/yyyy",
            "en-ph": "m/d/yyyy",
            "es-cl": "dd-mm-yyyy",
            "ar-ae": "dd/mm/yyyy",
            "es-uy": "dd/mm/yyyy",
            "ar-bh": "dd/mm/yyyy",
            "es-py": "dd/mm/yyyy",
            "ar-qa": "dd/mm/yyyy",
            "es-bo": "dd/mm/yyyy",
            "es-sv": "dd/mm/yyyy",
            "es-hn": "dd/mm/yyyy",
            "es-ni": "dd/mm/yyyy",
            "es-pr": "dd/mm/yyyy",
            "am-et": "d/m/yyyy",
            "tzm-latn-dz": "dd-mm-yyyy",
            "iu-latn-ca": "d/mm/yyyy",
            "sma-no": "dd.mm.yyyy",
            "mn-mong-cn": "yyyy/m/d",
            "gd-gb": "dd/mm/yyyy",
            "en-my": "d/m/yyyy",
            "prs-af": "dd/mm/yy",
            "bn-bd": "dd-mm-yy",
            "wo-sn": "dd/mm/yyyy",
            "rw-rw": "m/d/yyyy",
            "qut-gt": "dd/mm/yyyy",
            "sah-ru": "mm.dd.yyyy",
            "gsw-fr": "dd/mm/yyyy",
            "co-fr": "dd/mm/yyyy",
            "oc-fr": "dd/mm/yyyy",
            "mi-nz": "dd/mm/yyyy",
            "ga-ie": "dd/mm/yyyy",
            "se-se": "yyyy-mm-dd",
            "br-fr": "dd/mm/yyyy",
            "smn-fi": "d.m.yyyy",
            "moh-ca": "m/d/yyyy",
            "arn-cl": "dd-mm-yyyy",
            "ii-cn": "yyyy/m/d",
            "dsb-de": "d. m. yyyy",
            "ig-ng": "d/m/yyyy",
            "kl-gl": "dd-mm-yyyy",
            "lb-lu": "dd/mm/yyyy",
            "ba-ru": "dd.mm.yy",
            "nso-za": "yyyy/mm/dd",
            "quz-bo": "dd/mm/yyyy",
            "yo-ng": "d/m/yyyy",
            "ha-latn-ng": "d/m/yyyy",
            "fil-ph": "m/d/yyyy",
            "ps-af": "dd/mm/yy",
            "fy-nl": "d-m-yyyy",
            "ne-np": "m/d/yyyy",
            "se-no": "dd.mm.yyyy",
            "iu-cans-ca": "d/m/yyyy",
            "sr-latn-rs": "d.m.yyyy",
            "si-lk": "yyyy-mm-dd",
            "sr-cyrl-rs": "d.m.yyyy",
            "lo-la": "dd/mm/yyyy",
            "km-kh": "yyyy-mm-dd",
            "cy-gb": "dd/mm/yyyy",
            "bo-cn": "yyyy/m/d",
            "sms-fi": "d.m.yyyy",
            "as-in": "dd-mm-yyyy",
            "ml-in": "dd-mm-yy",
            "en-in": "dd-mm-yyyy",
            "or-in": "dd-mm-yy",
            "bn-in": "dd-mm-yy",
            "tk-tm": "dd.mm.yy",
            "bs-latn-ba": "d.m.yyyy",
            "mt-mt": "dd/mm/yyyy",
            "sr-cyrl-me": "d.m.yyyy",
            "se-fi": "d.m.yyyy",
            "zu-za": "yyyy/mm/dd",
            "xh-za": "yyyy/mm/dd",
            "tn-za": "yyyy/mm/dd",
            "hsb-de": "d. m. yyyy",
            "bs-cyrl-ba": "d.m.yyyy",
            "tg-cyrl-tj": "dd.mm.yy",
            "sr-latn-ba": "d.m.yyyy",
            "smj-no": "dd.mm.yyyy",
            "rm-ch": "dd/mm/yyyy",
            "smj-se": "yyyy-mm-dd",
            "quz-ec": "dd/mm/yyyy",
            "quz-pe": "dd/mm/yyyy",
            "hr-ba": "d.m.yyyy.",
            "sr-latn-me": "d.m.yyyy",
            "sma-se": "yyyy-mm-dd",
            "en-sg": "d/m/yyyy",
            "ug-cn": "yyyy-m-d",
            "sr-cyrl-ba": "d.m.yyyy",
            "es-us": "m/d/yyyy"
        };

        var currentLocal = (pmt.currentLocal).toLowerCase();

        var format = formats[currentLocal];
        if (!format) {
            for (var key in formats) {
                var alternative_key = key.split("-")[0];
                if (alternative_key == currentLocal) {
                    format = formats[key];
                    break;
                }
            }
        }
        return format || 'yyyy/MM/dd';
    }


    function doesCookieExist(cookieName) {
        var allCookies = document.cookie.split(';');
        for (var i = 0; i < allCookies.length; i++) {
            if (allCookies[i].trim().indexOf(cookieName + "=") === 0) return true;
        };
        return false;
    }

    function setTimeZoneCookie() {
        var now = new Date();
        var timeZoneOffset = -now.getTimezoneOffset();
        now.setTime(now.getTime() + 24 * 60 * 60 * 1000 * 30);
        document.cookie = _timeZoneCookie + "=" + timeZoneOffset.toString()
            + ";expires=" + now.toUTCString() + ";path=/;" + document.cookie;
    }

    function onDateTimeInit() {
        setTimeZoneCookie();
    };

    return {
        onDateTimeInit: onDateTimeInit,
        getLocaleDateString: getLocaleDateString
    };
}();